<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>uTrack: uTrack/utIMU.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">uTrack
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_a4e24aea86a0dbe5a7267615eff7c74c.html">uTrack</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">utIMU.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Support for managing and polling an inertial navigation unit for sensor data.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;uTrack.h&quot;</code><br />
<code>#include &quot;utHAL.h&quot;</code><br />
<code>#include &quot;utIMU.h&quot;</code><br />
<code>#include &quot;utIMUCommandPool.h&quot;</code><br />
<code>#include &quot;lpc23xx.h&quot;</code><br />
<code>#include &quot;lpc2387_config.h&quot;</code><br />
<code>#include &quot;utNmeaDriver.h&quot;</code><br />
<code>#include &quot;utNmeaOutput.h&quot;</code><br />
<code>#include &quot;utMonitor.h&quot;</code><br />
<code>#include &quot;utPayloads_IMU.h&quot;</code><br />
<code>#include &quot;utVersion.h&quot;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdarg.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &quot;utSPI_2387.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_u_t___i_m_u___c_o_m_m_a_n_d___c_o_n_t_r_o_l.html">UT_IMU_COMMAND_CONTROL</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a70edd69bdb695e81b8e2e3f6b2ff2712"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ut_i_m_u_8c.html#a70edd69bdb695e81b8e2e3f6b2ff2712">IMU_MIN_RATE</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a70edd69bdb695e81b8e2e3f6b2ff2712"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum IMU message poll rate in Hertz.  <br /></td></tr>
<tr class="separator:a70edd69bdb695e81b8e2e3f6b2ff2712"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33910b7daaf3e3786560718ed344615f"><td class="memItemLeft" align="right" valign="top"><a id="a33910b7daaf3e3786560718ed344615f" name="a33910b7daaf3e3786560718ed344615f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>IMU_MAX_RATE</b>&#160;&#160;&#160;200</td></tr>
<tr class="memdesc:a33910b7daaf3e3786560718ed344615f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum IMU message poll rate in Hertz. <br /></td></tr>
<tr class="separator:a33910b7daaf3e3786560718ed344615f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0bf373439d0f7e5e0d31b344c122ce1"><td class="memItemLeft" align="right" valign="top"><a id="af0bf373439d0f7e5e0d31b344c122ce1" name="af0bf373439d0f7e5e0d31b344c122ce1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_RX_QUEUE</b>&#160;&#160;&#160;1024</td></tr>
<tr class="separator:af0bf373439d0f7e5e0d31b344c122ce1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37a0360cb4d445e3ed32d1ab98c7ebea"><td class="memItemLeft" align="right" valign="top"><a id="a37a0360cb4d445e3ed32d1ab98c7ebea" name="a37a0360cb4d445e3ed32d1ab98c7ebea"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_TX_QUEUE</b>&#160;&#160;&#160;512</td></tr>
<tr class="separator:a37a0360cb4d445e3ed32d1ab98c7ebea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45ba202b05caf39795aeca91b0ae547e"><td class="memItemLeft" align="right" valign="top"><a id="a45ba202b05caf39795aeca91b0ae547e" name="a45ba202b05caf39795aeca91b0ae547e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>TIMEOUT</b>&#160;&#160;&#160;5000</td></tr>
<tr class="separator:a45ba202b05caf39795aeca91b0ae547e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51b68eca956d7fb731f681848dda6109"><td class="memItemLeft" align="right" valign="top"><a id="a51b68eca956d7fb731f681848dda6109" name="a51b68eca956d7fb731f681848dda6109"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>UT_PI</b>&#160;&#160;&#160;3.14159</td></tr>
<tr class="memdesc:a51b68eca956d7fb731f681848dda6109"><td class="mdescLeft">&#160;</td><td class="mdescRight">Our definition of PI. Should be moved to a global/maths appropriate location. <br /></td></tr>
<tr class="separator:a51b68eca956d7fb731f681848dda6109"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f6b51e4ba76d1f910021690cff30a30"><td class="memItemLeft" align="right" valign="top"><a id="a3f6b51e4ba76d1f910021690cff30a30" name="a3f6b51e4ba76d1f910021690cff30a30"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>REV_32</b>(val)&#160;&#160;&#160;(__rev(*(u32 *) &amp;val))</td></tr>
<tr class="separator:a3f6b51e4ba76d1f910021690cff30a30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a081f9c68f568f722b6ab36f3e34151ee"><td class="memItemLeft" align="right" valign="top"><a id="a081f9c68f568f722b6ab36f3e34151ee" name="a081f9c68f568f722b6ab36f3e34151ee"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>REV_16</b>(val)&#160;&#160;&#160;(u16) __rev((*(u32 *) &amp;val) &lt;&lt; 16)</td></tr>
<tr class="separator:a081f9c68f568f722b6ab36f3e34151ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cff347e5cdbd1d439732cca1e619919"><td class="memItemLeft" align="right" valign="top"><a id="a7cff347e5cdbd1d439732cca1e619919" name="a7cff347e5cdbd1d439732cca1e619919"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>LOG_IMU_TBUFFER_SIZE</b>&#160;&#160;&#160;81</td></tr>
<tr class="memdesc:a7cff347e5cdbd1d439732cca1e619919"><td class="mdescLeft">&#160;</td><td class="mdescRight">Length of the temporary buffer used for logging. <br /></td></tr>
<tr class="separator:a7cff347e5cdbd1d439732cca1e619919"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0182aac93aea02f99756259282ae45e"><td class="memItemLeft" align="right" valign="top"><a id="ab0182aac93aea02f99756259282ae45e" name="ab0182aac93aea02f99756259282ae45e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>irqWatchDogTimeout</b>&#160;&#160;&#160;5000</td></tr>
<tr class="separator:ab0182aac93aea02f99756259282ae45e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a3c9c084544dd6fa6b36373fcc47a9fae"><td class="memItemLeft" align="right" valign="top"><a id="a3c9c084544dd6fa6b36373fcc47a9fae" name="a3c9c084544dd6fa6b36373fcc47a9fae"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>IMU_DetectState</b> { <br />
&#160;&#160;<b>IMU_DETECT_NONE</b> = 0
, <b>IMU_DETECT_SERIAL</b> = 0x01
, <b>IMU_DETECT_HW</b> = 0x02
, <b>IMU_DETECT_FW</b> = 0x04
, <br />
&#160;&#160;<b>IMU_DETECT_ALL</b> = 0x07
<br />
 }</td></tr>
<tr class="separator:a3c9c084544dd6fa6b36373fcc47a9fae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21c55e5f2dbe772e52a1a8d541099aaa"><td class="memItemLeft" align="right" valign="top"><a id="a21c55e5f2dbe772e52a1a8d541099aaa" name="a21c55e5f2dbe772e52a1a8d541099aaa"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ut_i_m_u_8c.html#a21c55e5f2dbe772e52a1a8d541099aaa">UT_IMU_SOFT_STATE</a> { <br />
&#160;&#160;<b>UT_IMU_SOFT_OFF</b>
, <b>UT_IMU_POWER_WAIT</b>
, <b>UT_IMU_DETECT_MODULE</b>
, <b>UT_IMU_CONFIG</b>
, <br />
&#160;&#160;<b>UT_IMU_SOFT_ON</b>
, <b>UT_IMU_SOFT_RUNNING</b>
<br />
 }</td></tr>
<tr class="memdesc:a21c55e5f2dbe772e52a1a8d541099aaa"><td class="mdescLeft">&#160;</td><td class="mdescRight">The (software) state this module is in. <br /></td></tr>
<tr class="separator:a21c55e5f2dbe772e52a1a8d541099aaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a9720fd65ea66ebe525488002655874"><td class="memItemLeft" align="right" valign="top"><a id="a4a9720fd65ea66ebe525488002655874" name="a4a9720fd65ea66ebe525488002655874"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>UT_IMU_ORIENTATION</b> { <br />
&#160;&#160;<b>UT_IMU_AXIS_DECK</b>
, <b>UT_IMU_AXIS_BOW</b>
, <b>UT_IMU_AXIS_STERN</b>
, <b>UT_IMU_AXIS_PORT</b>
, <br />
&#160;&#160;<b>UT_IMU_AXIS_STARBOARD</b>
, <b>UT_IMU_AXIS_UNITY</b>
<br />
 }</td></tr>
<tr class="separator:a4a9720fd65ea66ebe525488002655874"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50a4bbb9086ff9a06f5d779dcfc13f8c"><td class="memItemLeft" align="right" valign="top"><a id="a50a4bbb9086ff9a06f5d779dcfc13f8c" name="a50a4bbb9086ff9a06f5d779dcfc13f8c"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>UT_IMU_CAL_MODE</b> { <b>UT_IMU_CAL_MODE_NORMAL</b>
, <b>UT_IMU_CAL_MODE_FROM_FILE</b>
 }</td></tr>
<tr class="separator:a50a4bbb9086ff9a06f5d779dcfc13f8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a778486a2ceb017fbc19676d38069f2bf"><td class="memItemLeft" align="right" valign="top"><a id="a778486a2ceb017fbc19676d38069f2bf" name="a778486a2ceb017fbc19676d38069f2bf"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>UT_IMU_CAL_SENSOR</b> { <b>UT_IMU_CAL_MODE_SENSOR_BOTH</b>
, <b>UT_IMU_CAL_MODE_SENSOR_ACC</b>
, <b>UT_IMU_CAL_MODE_SENSOR_MAG</b>
 }</td></tr>
<tr class="separator:a778486a2ceb017fbc19676d38069f2bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae40e01bf56a8c24ea5d0ab78bb0a109f"><td class="memItemLeft" align="right" valign="top"><a id="ae40e01bf56a8c24ea5d0ab78bb0a109f" name="ae40e01bf56a8c24ea5d0ab78bb0a109f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>updateLogFlags</b> (UT_IMU_PollCmd id)</td></tr>
<tr class="separator:ae40e01bf56a8c24ea5d0ab78bb0a109f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf42f98a8d883f809a80681846f83dc6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ut_i_m_u_8c.html#aaf42f98a8d883f809a80681846f83dc6">utIMU_NotifyMissedUpdates</a> (u32 n)</td></tr>
<tr class="separator:aaf42f98a8d883f809a80681846f83dc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a413596df508519b3f4c81d7cb3dcec95"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ut_i_m_u_8c.html#a413596df508519b3f4c81d7cb3dcec95">utIMU_Notify</a> (UT_DeviceMessage state)</td></tr>
<tr class="separator:a413596df508519b3f4c81d7cb3dcec95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1e6f4962e92c10b972574e8d595f7cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ut_i_m_u_8c.html#ab1e6f4962e92c10b972574e8d595f7cf">utIMU_SetStoreOptions</a> (UT_NMEA_Store *nmeaStore)</td></tr>
<tr class="separator:ab1e6f4962e92c10b972574e8d595f7cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf8ffd26dc3a1ca81148fe002fcd14ce"><td class="memItemLeft" align="right" valign="top"><a id="aaf8ffd26dc3a1ca81148fe002fcd14ce" name="aaf8ffd26dc3a1ca81148fe002fcd14ce"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>normalize_quat</b> (double *quat)</td></tr>
<tr class="separator:aaf8ffd26dc3a1ca81148fe002fcd14ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20c0d388eb8f611a6478e349a6b1d961"><td class="memItemLeft" align="right" valign="top"><a id="a20c0d388eb8f611a6478e349a6b1d961" name="a20c0d388eb8f611a6478e349a6b1d961"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>vec_sub</b> (double *vec_result, double *vec1, double *vec2)</td></tr>
<tr class="separator:a20c0d388eb8f611a6478e349a6b1d961"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a565a25f54165f8a8c401b4c7aaa0be6a"><td class="memItemLeft" align="right" valign="top"><a id="a565a25f54165f8a8c401b4c7aaa0be6a" name="a565a25f54165f8a8c401b4c7aaa0be6a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>vec_add</b> (double *vec_result, double *vec1, double *vec2)</td></tr>
<tr class="separator:a565a25f54165f8a8c401b4c7aaa0be6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5eb376fdbe4c55accf0dd480242c27a0"><td class="memItemLeft" align="right" valign="top"><a id="a5eb376fdbe4c55accf0dd480242c27a0" name="a5eb376fdbe4c55accf0dd480242c27a0"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>vec_length</b> (double *vec)</td></tr>
<tr class="separator:a5eb376fdbe4c55accf0dd480242c27a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cd00328ad623d5799e35c52e67109e3"><td class="memItemLeft" align="right" valign="top"><a id="a3cd00328ad623d5799e35c52e67109e3" name="a3cd00328ad623d5799e35c52e67109e3"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>matrix_mult</b> (double *vec_result, double matrix[3][3], double *vec)</td></tr>
<tr class="separator:a3cd00328ad623d5799e35c52e67109e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a432dbfa0f99ee06b085bc1c02ccd3f0f"><td class="memItemLeft" align="right" valign="top"><a id="a432dbfa0f99ee06b085bc1c02ccd3f0f" name="a432dbfa0f99ee06b085bc1c02ccd3f0f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>startupCheck</b> (u32 now)</td></tr>
<tr class="separator:a432dbfa0f99ee06b085bc1c02ccd3f0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a583eeb3df43fe49fd9b6ef71aa446c3d"><td class="memItemLeft" align="right" valign="top"><a id="a583eeb3df43fe49fd9b6ef71aa446c3d" name="a583eeb3df43fe49fd9b6ef71aa446c3d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>checkMissedUpdates</b> (u32 now)</td></tr>
<tr class="separator:a583eeb3df43fe49fd9b6ef71aa446c3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a068f7a3347e0e75d3149ccbc17e95b57"><td class="memItemLeft" align="right" valign="top"><a id="a068f7a3347e0e75d3149ccbc17e95b57" name="a068f7a3347e0e75d3149ccbc17e95b57"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>checkErrorState</b> (u32 now)</td></tr>
<tr class="separator:a068f7a3347e0e75d3149ccbc17e95b57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb50d026234ceebea97353b659ca7ce5"><td class="memItemLeft" align="right" valign="top"><a id="acb50d026234ceebea97353b659ca7ce5" name="acb50d026234ceebea97353b659ca7ce5"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>getFlagsFromToken</b> (const char *token, UT_IMU_CmdFieldDetails *flags, bool log)</td></tr>
<tr class="separator:acb50d026234ceebea97353b659ca7ce5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:af2e8cdde8282d3bdec96c32277c098a4"><td class="memItemLeft" align="right" valign="top"><a id="af2e8cdde8282d3bdec96c32277c098a4" name="af2e8cdde8282d3bdec96c32277c098a4"></a>
UT_IMU_CAL_MODE&#160;</td><td class="memItemRight" valign="bottom"><b>CAL_MODE</b> = UT_IMU_CAL_MODE_NORMAL</td></tr>
<tr class="separator:af2e8cdde8282d3bdec96c32277c098a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92c9eff13910e8988eabe59caa7e5377"><td class="memItemLeft" align="right" valign="top"><a id="a92c9eff13910e8988eabe59caa7e5377" name="a92c9eff13910e8988eabe59caa7e5377"></a>
UT_IMU_CAL_SENSOR&#160;</td><td class="memItemRight" valign="bottom"><b>CAL_SENSOR</b> = UT_IMU_CAL_MODE_SENSOR_BOTH</td></tr>
<tr class="separator:a92c9eff13910e8988eabe59caa7e5377"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21cd490f6191f66678f55b4c242a10cf"><td class="memItemLeft" align="right" valign="top"><a id="a21cd490f6191f66678f55b4c242a10cf" name="a21cd490f6191f66678f55b4c242a10cf"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>yaw</b></td></tr>
<tr class="separator:a21cd490f6191f66678f55b4c242a10cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a863751cd3f7f46a9f4ee95ed38c673ca"><td class="memItemLeft" align="right" valign="top"><a id="a863751cd3f7f46a9f4ee95ed38c673ca" name="a863751cd3f7f46a9f4ee95ed38c673ca"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>array_count</b></td></tr>
<tr class="separator:a863751cd3f7f46a9f4ee95ed38c673ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c0af9f2e97842405fb15ed952ef2976"><td class="memItemLeft" align="right" valign="top"><a id="a6c0af9f2e97842405fb15ed952ef2976" name="a6c0af9f2e97842405fb15ed952ef2976"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>stop</b></td></tr>
<tr class="separator:a6c0af9f2e97842405fb15ed952ef2976"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Support for managing and polling an inertial navigation unit for sensor data. </p>
<p>This software module is used to interact with an IMU via SPI bus. The SPI implementaiton under the HAL is moderately entangled in support for this module.</p>
<dl class="section author"><dt>Author</dt><dd>Oscar Key </dd></dl>
<dl class="section date"><dt>Date</dt><dd>16/07/2013 </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>2013, Igtimi Ltd., all rights reserved. </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a70edd69bdb695e81b8e2e3f6b2ff2712" name="a70edd69bdb695e81b8e2e3f6b2ff2712"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70edd69bdb695e81b8e2e3f6b2ff2712">&#9670;&#160;</a></span>IMU_MIN_RATE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IMU_MIN_RATE&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Minimum IMU message poll rate in Hertz. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a413596df508519b3f4c81d7cb3dcec95" name="a413596df508519b3f4c81d7cb3dcec95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a413596df508519b3f4c81d7cb3dcec95">&#9670;&#160;</a></span>utIMU_Notify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool utIMU_Notify </td>
          <td>(</td>
          <td class="paramtype">UT_DeviceMessage&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Checks that the IMU module is present in the device</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool - if the IMU module is present return true, else false</dd></dl>
<dl class="section note"><dt>Note</dt><dd></dd></dl>
<p>The Notify function passes a message to the software module, informing it of expected module <em>state</em>. It returns a value that is considered a response to a query about the specified <em>state</em>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>A state message. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Whether or not this software module is in the desired <em>state</em>. </dd></dl>

</div>
</div>
<a id="aaf42f98a8d883f809a80681846f83dc6" name="aaf42f98a8d883f809a80681846f83dc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf42f98a8d883f809a80681846f83dc6">&#9670;&#160;</a></span>utIMU_NotifyMissedUpdates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void utIMU_NotifyMissedUpdates </td>
          <td>(</td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tell the IMU software module that some number of polls have been missed, either in transmission or reception. Used by the SPI code that handles the actual polling in <em>utSPI_2387.c</em> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n</td><td>The number of polls that were missed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab1e6f4962e92c10b972574e8d595f7cf" name="ab1e6f4962e92c10b972574e8d595f7cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1e6f4962e92c10b972574e8d595f7cf">&#9670;&#160;</a></span>utIMU_SetStoreOptions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void utIMU_SetStoreOptions </td>
          <td>(</td>
          <td class="paramtype">UT_NMEA_Store *&#160;</td>
          <td class="paramname"><em>nmeaStore</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The SetStoreOptions function applies the options the IMU desires to the provided store. Other options will be overriden.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nmeaStore</td><td>The store to configure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Sep 26 2024 13:37:23 for uTrack by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
